Starting multi-stage pipeline evaluation...
Dataset: /home/tony/projects/promptguard/datasets/artifact_evaluation_test_set.json
Model: google/gemini-2.5-flash-lite-preview-09-2025

Evaluating polite_1...
Evaluating polite_2...
Evaluating polite_3...
Evaluating polite_4...
Evaluating polite_5...
Evaluating encoding_1...
Evaluating encoding_2...
Evaluating encoding_3...
Evaluating encoding_4...
Evaluating encoding_5...
Evaluating obvious_1...
Evaluating obvious_2...
Evaluating obvious_3...
Evaluating obvious_4...
Evaluating obvious_5...
Evaluating normal_1...
Evaluating normal_2...
Evaluating normal_3...
Evaluating normal_4...
Evaluating normal_5...
Traceback (most recent call last):
  File "/home/tony/projects/promptguard/evaluate_pipeline.py", line 391, in <module>
    asyncio.run(main())
    ~~~~~~~~~~~^^^^^^^^
  File "/home/tony/.local/share/uv/python/cpython-3.13.2-linux-x86_64-gnu/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/home/tony/.local/share/uv/python/cpython-3.13.2-linux-x86_64-gnu/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/home/tony/.local/share/uv/python/cpython-3.13.2-linux-x86_64-gnu/lib/python3.13/asyncio/base_events.py", line 725, in run_until_complete
    return future.result()
           ~~~~~~~~~~~~~^^
  File "/home/tony/projects/promptguard/evaluate_pipeline.py", line 370, in main
    json.dump(results, f, indent=2)
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/home/tony/.local/share/uv/python/cpython-3.13.2-linux-x86_64-gnu/lib/python3.13/json/__init__.py", line 179, in dump
    for chunk in iterable:
                 ^^^^^^^^
  File "/home/tony/.local/share/uv/python/cpython-3.13.2-linux-x86_64-gnu/lib/python3.13/json/encoder.py", line 432, in _iterencode
    yield from _iterencode_dict(o, _current_indent_level)
  File "/home/tony/.local/share/uv/python/cpython-3.13.2-linux-x86_64-gnu/lib/python3.13/json/encoder.py", line 406, in _iterencode_dict
    yield from chunks
  File "/home/tony/.local/share/uv/python/cpython-3.13.2-linux-x86_64-gnu/lib/python3.13/json/encoder.py", line 326, in _iterencode_list
    yield from chunks
  File "/home/tony/.local/share/uv/python/cpython-3.13.2-linux-x86_64-gnu/lib/python3.13/json/encoder.py", line 406, in _iterencode_dict
    yield from chunks
  File "/home/tony/.local/share/uv/python/cpython-3.13.2-linux-x86_64-gnu/lib/python3.13/json/encoder.py", line 406, in _iterencode_dict
    yield from chunks
  File "/home/tony/.local/share/uv/python/cpython-3.13.2-linux-x86_64-gnu/lib/python3.13/json/encoder.py", line 439, in _iterencode
    o = _default(o)
  File "/home/tony/.local/share/uv/python/cpython-3.13.2-linux-x86_64-gnu/lib/python3.13/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type ExchangeType is not JSON serializable
